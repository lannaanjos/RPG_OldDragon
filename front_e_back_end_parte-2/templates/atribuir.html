{% extends 'base.html' %}
{% block content %}
  <form id="form-atribuir" method="post" action="{{ url_for('personagens.finalizar') }}" class="card">
    <h2>Nome do personagem</h2>
    <p><strong>{{ nome }}</strong></p>
    <input type="hidden" name="nome" value="{{ nome }}">

    <h2>Distribua os atributos ({{ modo|capitalize }})</h2>

    <p>Valores gerados: <strong>{{ valores|join(', ') }}</strong></p>
    <input type="hidden" name="modo" value="{{ modo }}">

    <div class="grid-2">
      {% for h in habilidades %}
        <label>
          {{ h }}
          <select name="attr_{{ h }}" class="attr-select" required>
            <option value="">-- Escolha --</option>
            {% for v in valores %}
              <option value="{{ v }}">{{ v }}</option>
            {% endfor %}
          </select>
        </label>
      {% endfor %}
    </div>

    <h3>Raça</h3>
    <select name="raca" required disabled>
      {% for r in racas %}
        <option value="{{ r }}" {% if r == raca_selecionada %}selected{% endif %}>{{ r }}</option>
      {% endfor %}
    </select>
    <!-- hidden para garantir que o valor vá no POST mesmo com disabled -->
    <input type="hidden" name="raca" value="{{ raca_selecionada }}">

    <h3>Classe</h3>
    <select name="classe" required disabled>
      {% for c in classes %}
        <option value="{{ c }}" {% if c == classe_selecionada %}selected{% endif %}>{{ c }}</option>
      {% endfor %}
    </select>
    <!-- hidden para o valor ir no post mesmo com disabled -->
    <input type="hidden" name="classe" value="{{ classe_selecionada }}">

    <div class="actions">
      <button type="submit">Finalizar</button>
    </div>
  </form>

  <script>
    const generatedValues = {{ valores|tojson }};
  </script>
  <script src="{{ url_for('static', filename='atribuir.js') }}"></script>
{% endblock %}
